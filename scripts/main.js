"use strict";window.g_bch=class{constructor(e,g){this.g_aSP=e,this.g_bci=g,this.g_bcj=!1,this.g_aRU=()=>this.g_aqF()}g_bck(){}g_bcl(e,g,_,t){this.g_aSP.g_bcm(this.g_bci,e,g,_,t)}g_bcn(e,g,_,t){return this.g_aSP.g_bco(this.g_bci,e,g,_,t)}g_bcp(e,g,_){this.g_aSP.g_bcq()?this.g_bcl(e,g,_):this.g_aSP.g_bcr()._OnMessageFromDOM({type:"event",component:this.g_bci,handler:e,dispatchOpts:_||null,data:g,responseId:null})}g_bcs(e,g){this.g_aSP.g_bct(this.g_bci,e,g)}g_bcu(e){for(const[g,_]of e)this.g_bcs(g,_)}g_bcv(){return this.g_aSP}g_bcw(){return this.g_bci}g_aGO(){this.g_bcj||(this.g_aSP.g_bcx(this.g_aRU),this.g_bcj=!0)}g_aGB(){this.g_bcj&&(this.g_aSP.g_bcy(this.g_aRU),this.g_bcj=!1)}g_aqF(){}},"use strict",window.g_bcz=class extends g_bch{constructor(e,g){super(e,g),this.g_bcA=new Map,this.g_bcB=!0,this.g_bcs("create",e=>this.g_bcC(e)),this.g_bcs("destroy",e=>this.g_bcD(e)),this.g_bcs("set-visible",e=>this.g_bcE(e)),this.g_bcs("update-position",e=>this.g_bcF(e)),this.g_bcs("update-state",e=>this.g_aW_(e)),this.g_bcs("focus",e=>this.g_bcG(e)),this.g_bcs("set-css-style",e=>this.g_bcH(e))}g_bcI(e){this.g_bcB=!!e}g_bcJ(e,g){this.g_bcs(e,e=>{const _=e.elementId,t=this.g_bcA.get(_);return g(t,e)})}g_bcC(e){const g=e.elementId,_=this.g_aHl(g,e);this.g_bcA.set(g,_),e.isVisible||(_.style.display="none"),this.g_bcB&&document.body.appendChild(_)}g_aHl(){throw new Error("required override")}g_bcK(){}g_bcD(e){const g=e.elementId,_=this.g_bcA.get(g);this.g_bcK(_),this.g_bcB&&_.parentElement.removeChild(_),this.g_bcA.delete(g)}g_bcL(e,g,_){_||(_={}),_.elementId=g,this.g_bcl(e,_)}g_bcM(e,g,_){_||(_={}),_.elementId=g,this.g_bcp(e,_)}g_bcE(e){if(this.g_bcB){const g=this.g_bcA.get(e.elementId);g.style.display=e.isVisible?"":"none"}}g_bcF(e){if(this.g_bcB){const g=this.g_bcA.get(e.elementId);g.style.left=e.left+"px",g.style.top=e.top+"px",g.style.width=e.width+"px",g.style.height=e.height+"px";const _=e.fontSize;null!==_&&(g.style.fontSize=_+"em")}}g_aW_(e){const g=this.g_bcA.get(e.elementId);this.g_bcN(g,e)}g_bcN(){throw new Error("required override")}g_bcG(e){const g=this.g_bcA.get(e.elementId);e.focus?g.focus():g.blur()}g_bcH(e){const g=this.g_bcA.get(e.elementId);g.style[e.prop]=e.val}g_bcO(e){return this.g_bcA.get(e)}},"use strict";{function _(e){return new Promise((g,_)=>{const t=document.createElement("script");t.onload=g,t.onerror=_,t.async=!1,t.src=e,document.head.appendChild(t)})}async function t(e){const g=await n(e),_=new TextDecoder("utf-8");return _.decode(g)}function n(e){return new Promise((g,_)=>{const t=new FileReader;t.onload=e=>g(e.target.result),t.onerror=e=>_(e),t.readAsArrayBuffer(e)})}const b=/(iphone|ipod|ipad)/i.test(navigator.userAgent);let a=new Audio;const o={"audio/webm; codecs=opus":!!a.canPlayType("audio/webm; codecs=opus"),"audio/ogg; codecs=opus":!!a.canPlayType("audio/ogg; codecs=opus"),"audio/webm; codecs=vorbis":!!a.canPlayType("audio/webm; codecs=vorbis"),"audio/ogg; codecs=vorbis":!!a.canPlayType("audio/ogg; codecs=vorbis"),"audio/mp4":!!a.canPlayType("audio/mp4"),"audio/mpeg":!!a.canPlayType("audio/mpeg")};a=null;const e=[];let g=0;window.RealFile=window.File;const r=[],i=new Map,s=new Map;let h=0;const l=[];self.g_bcP=function(e){if("function"!=typeof e)throw new Error("runOnStartup called without a function");l.push(e)},window.g_bcQ=class c{constructor(e){this.g_bcR=e.g_bcS,this.g_bcT=null,this.g_aQV="",this.g_bcU=e.g_bcV,this.g_bcW={},this.g_bcX=null,this.g_bcY=null,this.g_bcZ=[],this.g_bc_=null,this.g_aO$=null,this.g_aSJ=null,this.g_aPI=-1,this.g_bc$=()=>this.g_bda(),this.g_bdb=[],this.g_aQ_=e.g_fE,"cordova"===this.g_aQ_&&this.g_bcR&&(console.warn("[C3 runtime] Worker mode is enabled and supported, but is disabled in Cordova due to crbug.com/939775. Reverting to DOM mode."),this.g_bcR=!1),this.g_bdc=!1,this.g_bdd=null,("html5"===this.g_aQ_||"playable-ad"===this.g_aQ_)&&"file"===location.protocol.substr(0,4)&&alert("Exported games won't work until you upload them. (When running on the file: protocol, browsers block many features from working for security reasons.)"),this.g_bct("runtime","cordova-fetch-local-file",e=>this.g_bde(e)),this.g_bct("runtime","create-job-worker",e=>this.g_bdf(e)),"cordova"===this.g_aQ_?document.addEventListener("deviceready",()=>this.g_aFE(e)):this.g_aFE(e)}g_OH(){this.g_bdg(),this.g_bcT&&(this.g_bcT.onmessage=null,this.g_bcT=null),this.g_bcX&&(this.g_bcX.terminate(),this.g_bcX=null),this.g_bcY&&(this.g_bcY.g_OH(),this.g_bcY=null),this.g_aO$&&(this.g_aO$.parentElement.removeChild(this.g_aO$),this.g_aO$=null)}g_bdh(){return this.g_aO$}g_Pk(){return this.g_aQV}g_bcq(){return this.g_bcR}g_aUj(){return this.g_aQ_}g_aTe(){return"cordova"===this.g_aQ_&&b}g_bdi(){return"cordova"===this.g_aQ_&&!1===b}async g_aFE(e){if("playable-ad"===this.g_aQ_){this.g_bdd=self.c3_base64files,await this.g_bdj();for(let g=0,_=e.g_bdk.length;g<_;++g){const _=e.g_bdk[g].toLowerCase();this.g_bdd.hasOwnProperty(_)&&(e.g_bdk[g]=URL.createObjectURL(this.g_bdd[_]))}}if(e.g_bdl)this.g_aQV=e.g_bdl;else{const e=location.origin;this.g_aQV=("null"===e?"file:///":e)+location.pathname;const g=this.g_aQV.lastIndexOf("/");-1!==g&&(this.g_aQV=this.g_aQV.substr(0,g+1))}if(e.g_bdm)for(const[g,_]of Object.entries(e.g_bdm))this.g_bcW[g]=URL.createObjectURL(_);const g=new MessageChannel;this.g_bcT=g.port1,this.g_bcT.onmessage=e=>this._OnMessageFromRuntime(e.data),window.c3_addPortMessageHandler&&window.c3_addPortMessageHandler(e=>this.g_bdn(e)),this.g_aSJ=new self.g_bdo(this),await this.g_aSJ.g_aMd(),this.g_bdp(),"object"==typeof window.StatusBar&&window.StatusBar.hide(),"object"==typeof window.AndroidFullScreen&&window.AndroidFullScreen.immersiveMode(),await this.g_bdq(),this.g_bcR?await this.g_bdr(e,g.port2):await this.g_bds(e,g.port2)}g_bdt(e){return this.g_bcW.hasOwnProperty(e)?this.g_bcW[e]:e.endsWith("/workermain.js")&&this.g_bcW.hasOwnProperty("workermain.js")?this.g_bcW["workermain.js"]:"playable-ad"===this.g_aQ_&&this.g_bdd.hasOwnProperty(e.toLowerCase())?URL.createObjectURL(this.g_bdd[e.toLowerCase()]):e}async g_bdu(g,_,t){if(g.startsWith("blob:"))return new Worker(g,t);if(this.g_aTe()){const e=await this.g_ahx(this.g_bcU+g),_=new Blob([e],{type:"application/javascript"});return new Worker(URL.createObjectURL(_),t)}const n=new URL(g,_),b=location.origin!==n.origin;if(b){const e=await fetch(n);if(!e.ok)throw new Error("failed to fetch worker script");const g=await e.blob();return new Worker(URL.createObjectURL(g),t)}return new Worker(n,t)}g_bdp(){if(this.g_aTe()){const g=document.documentElement.style,_=document.body.style,t=window.innerWidth<window.innerHeight,n=t?window.screen.width:window.screen.height,b=t?window.screen.height:window.screen.width;_.height=g.height=b+"px",_.width=g.width=n+"px"}}g_bdv(e){return{baseUrl:this.g_aQV,windowInnerWidth:window.innerWidth,windowInnerHeight:window.innerHeight,devicePixelRatio:window.devicePixelRatio,isFullscreen:c.g_aQh(),projectData:e.g_bdw,previewImageBlobs:window.cr_previewImageBlobs||this.g_bdd,previewProjectFileBlobs:window.cr_previewProjectFileBlobs,exportType:e.g_fE,isDebug:-1<self.location.search.indexOf("debug"),ife:!!self.g_bdx,jobScheduler:this.g_aSJ.g_bdy(),supportedAudioFormats:o,opusWasmScriptUrl:window.cr_opusWasmScriptUrl||this.g_bcU+"opus.wasm.js",opusWasmBinaryUrl:window.cr_opusWasmBinaryUrl||this.g_bcU+"opus.wasm.wasm",isWKWebView:this.g_aTe(),isFBInstantAvailable:"undefined"!=typeof self.FBInstant}}async g_bdr(e,g){const _=this.g_bdt(e.g_bdz);this.g_bcX=await this.g_bdu(_,this.g_aQV,{name:"Runtime"}),this.g_aO$=document.createElement("canvas"),this.g_aO$.style.display="none";const t=this.g_aO$.transferControlToOffscreen();document.body.appendChild(this.g_aO$),window.c3canvas=this.g_aO$,this.g_bcX.postMessage(Object.assign(this.g_bdv(e),{type:"init-runtime",isInWorker:!0,messagePort:g,canvas:t,workerDependencyScripts:e.g_bdA||[],engineScripts:e.g_bdk,projectScripts:window.g_bdB,projectScriptsStatus:self.C3_ProjectScriptsStatus}),[g,t,...this.g_aSJ.g_bdC()]),this.g_bcZ=r.map(e=>new e(this)),this.g_bdD(),self.c3_callFunction=(e,g)=>this.g_bc_.g_axy(e,g),"preview"===this.g_aQ_&&(self.goToLastErrorScript=()=>this.g_bcm("runtime","go-to-last-error-script"))}async g_bds(g,t){this.g_aO$=document.createElement("canvas"),this.g_aO$.style.display="none",document.body.appendChild(this.g_aO$),window.c3canvas=this.g_aO$,this.g_bcZ=r.map(e=>new e(this)),this.g_bdD();const n=g.g_bdk.map(e=>new URL(e,this.g_aQV).toString());if(await Promise.all(n.map(e=>_(e))),g.g_bdE&&0<g.g_bdE.length){const e=self.C3_ProjectScriptsStatus;try{if(await Promise.all(g.g_bdE.map(e=>_(e[1]))),Object.values(e).some(e=>!e))return void self.setTimeout(()=>this.g_bdF(e),100)}catch(g){return console.error("[Preview] Error loading project scripts: ",g),void self.setTimeout(()=>this.g_bdF(e),100)}}if("preview"===this.g_aQ_&&"object"!=typeof self.g_Lr.g_bcg)return console.error("[C3 runtime] Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax."),void alert("Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax.");const b=Object.assign(this.g_bdv(g),{isInWorker:!1,messagePort:t,canvas:this.g_aO$,runOnStartupFunctions:l});this.g_bcY=self.C3_CreateRuntime(b),await self.C3_InitRuntime(this.g_bcY,b)}g_bdF(e){const g=Object.entries(e).filter(e=>!e[1]).map(e=>e[0]),_=`Failed to load project script '${g[0]}'. Check all your JavaScript code has valid syntax.`;console.error("[Preview] "+_),alert(_)}async g_bdf(){const e=await this.g_aSJ.g_bdG();return{outputPort:e,transferables:[e]}}g_bcr(){if(this.g_bcR)throw new Error("not available in worker mode");return this.g_bcY}g_bcm(g,_,t,n,b){this.g_bcT.postMessage({type:"event",component:g,handler:_,dispatchOpts:n||null,data:t,responseId:null},this.g_bdc?void 0:b)}g_bco(_,t,n,b,a){const e=h++,i=new Promise((g,_)=>{s.set(e,{resolve:g,reject:_})});return this.g_bcT.postMessage({type:"event",component:_,handler:t,dispatchOpts:b||null,data:n,responseId:e},this.g_bdc?void 0:a),i}["_OnMessageFromRuntime"](e){const g=e.type;if("event"===g)this.g_bdH(e);else if("result"===g)this.g_bdI(e);else if("runtime-ready"===g)this.g_bdJ();else if("alert"===g)alert(e.message);else throw new Error(`unknown message '${g}'`)}g_bdH(_){const t=_.component,n=_.handler,b=_.data,o=_.responseId,e=i.get(t);if(!e)return void console.warn(`[DOM] No event handlers for component '${t}'`);const a=e.get(n);if(!a)return void console.warn(`[DOM] No handler '${n}' for component '${t}'`);let g=null;try{g=a(b)}catch(e){return console.error(`Exception in '${t}' handler '${n}':`,e),void(null!==o&&this.g_bdK(o,!1,e.toString()))}null!==o&&(g&&g.then?g.then(e=>this.g_bdK(o,!0,e)).catch(e=>{console.error(`Rejection from '${t}' handler '${n}':`,e),this.g_bdK(o,!1,e.toString())}):this.g_bdK(o,!0,g))}g_bdK(e,g,_){let t;_&&_.transferables&&(t=_.transferables),this.g_bcT.postMessage({type:"result",responseId:e,isOk:g,result:_},t)}g_bdI(g){const _=g.responseId,t=g.isOk,n=g.result,b=s.get(_);t?b.resolve(n):b.reject(n),s.delete(_)}g_bct(e,g,_){let t=i.get(e);if(t||(t=new Map,i.set(e,t)),t.has(g))throw new Error(`[DOM] Component '${e}' already has handler '${g}'`);t.set(g,_)}static g_bdL(e){if(r.includes(e))throw new Error("DOM handler already added");r.push(e)}g_bdD(){for(const e of this.g_bcZ)if("runtime"===e.g_bcw())return void(this.g_bc_=e);throw new Error("cannot find runtime DOM handler")}g_bdn(e){this.g_bcm("debugger","message",e)}g_bdJ(){for(const e of this.g_bcZ)e.g_bck()}static g_aQh(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)}async g_bdM(){return await this.g_bco("runtime","get-remote-preview-status-info")}g_bcx(e){this.g_bdb.push(e),this.g_bdN()}g_bcy(e){const g=this.g_bdb.indexOf(e);if(-1===g)throw new Error("invalid callback");this.g_bdb.splice(g,1),this.g_bdb.length||this.g_bdg()}g_bdN(){-1===this.g_aPI&&this.g_bdb.length&&(this.g_aPI=requestAnimationFrame(this.g_bc$))}g_bdg(){-1!==this.g_aPI&&(cancelAnimationFrame(this.g_aPI),this.g_aPI=-1)}g_bda(){this.g_aPI=-1;for(const e of this.g_bdb)e();this.g_bdN()}g_bdO(e){this.g_bc_.g_bdO(e)}g_bdP(e){this.g_bc_.g_bdP(e)}g_bdQ(){this.g_bc_.g_bdQ()}g_DQ(e){this.g_bc_.g_DQ(e)}g_ahS(e){return!!o[e]}async g_aIy(e){const g=await this.g_bco("runtime","opus-decode",{arrayBuffer:e},null,[e]);return new Float32Array(g)}g_PP(e){return /^(?:[a-z]+:)?\/\//.test(e)||"data:"===e.substr(0,5)||"blob:"===e.substr(0,5)}g_PQ(e){return!this.g_PP(e)}async g_bde(e){const g=e.filename;switch(e.as){case"text":return await this.g_ahy(g);case"buffer":return await this.g_ahx(g);default:throw new Error("unsupported type");}}g_bdR(e){const g=window.cordova.file.applicationDirectory+"www/"+e.toLowerCase();return new Promise((e,_)=>{window.resolveLocalFileSystemURL(g,g=>{g.file(e,_)},_)})}async g_ahy(e){const g=await this.g_bdR(e);return await t(g)}g_bdS(){if(e.length&&!(8<=g)){g++;const _=e.shift();this.g_bdT(_.filename,_.g_pd,_.g_pe)}}g_ahx(_){return new Promise((t,n)=>{e.push({filename:_,g_pd:e=>{g--,this.g_bdS(),t(e)},g_pe:e=>{g--,this.g_bdS(),n(e)}}),this.g_bdS()})}async g_bdT(g,_,e){try{const t=await this.g_bdR(g),b=await n(t);_(b)}catch(g){e(g)}}async g_bdj(){const e=[];for(const[g,_]of Object.entries(this.g_bdd))e.push(this.g_bdU(g,_));await Promise.all(e)}async g_bdU(e,g){if("object"==typeof g)this.g_bdd[e]=new Blob([g.str],{type:g.type});else{const _=await fetch(g),t=await _.blob();this.g_bdd[e]=t}}g_bdq(){let e=null;const g=new Promise(g=>e=g),_=new ArrayBuffer(1),t=new MessageChannel;return t.port2.onmessage=g=>{g.data&&g.data.arrayBuffer||(this.g_bdc=!0,console.warn("MessageChannel transfers determined to be broken. Disabling transferables.")),e()},t.port1.postMessage({arrayBuffer:_},[_]),g}}}{function _(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents||e.originalEvent&&e.originalEvent.sourceCapabilities&&e.originalEvent.sourceCapabilities.firesTouchEvents}function t(e){return new Promise((g,_)=>{const t=new Image;t.onload=()=>g(t),t.onerror=e=>_(e),t.src=e})}async function n(e){const g=URL.createObjectURL(e);try{return await t(g)}finally{URL.revokeObjectURL(g)}}function o(e){do{if(e.parentNode&&e.hasAttribute("contenteditable"))return!0;e=e.parentNode}while(e);return!1}function r(e){(e.metaKey||e.ctrlKey)&&e.preventDefault()}function e(){try{return window.parent&&window.parent.document.hasFocus()}catch(e){return!1}}const s={dispatchRuntimeEvent:!0,dispatchUserScriptEvent:!0},g={dispatchUserScriptEvent:!0};self.C3_RasterSvgImage=async function(g,_,t){const n=document.createElement("canvas");n.width=_,n.height=t;const b=n.getContext("2d");return b.drawImage(g,0,0,_,t),n};let b=!1;document.addEventListener("pause",()=>b=!0),document.addEventListener("resume",()=>b=!1);const a=class extends g_bch{constructor(e){super(e,"runtime"),this.g_bdV=!0,this.g_bdW=-1,this.g_bdX="any",this.g_bdY=!1,this.g_bdZ=!1,this.g_bd_=null,e.g_bct("canvas","update-size",e=>this.g_bd$(e)),e.g_bct("runtime","invoke-download",e=>this.g_bea(e)),e.g_bct("runtime","raster-svg-image",e=>this.g_beb(e)),e.g_bct("runtime","set-target-orientation",e=>this.g_bec(e)),e.g_bct("runtime","register-sw",()=>this.g_bed()),e.g_bct("runtime","post-to-debugger",e=>this.g_bee(e)),e.g_bct("runtime","go-to-script",e=>this.g_bee(e)),e.g_bct("runtime","before-start-ticking",()=>this.g_bef()),e.g_bct("runtime","debug-highlight",e=>this.g_beg(e)),e.g_bct("runtime","enable-device-orientation",()=>this.g_beh()),e.g_bct("runtime","enable-device-motion",()=>this.g_bei());const g=new Set(["input","textarea","datalist"]);window.addEventListener("contextmenu",_=>{const t=_.target,n=t.tagName.toLowerCase();g.has(n)||o(t)||_.preventDefault()}),window.addEventListener("selectstart",e=>e.preventDefault()),window.addEventListener("gesturehold",e=>e.preventDefault()),window.addEventListener("touchstart",e=>e.preventDefault(),{passive:!1}),this.g_bej=0,window.addEventListener("mousedown",e=>{1===e.button&&e.preventDefault()}),window.addEventListener("mousewheel",r,{passive:!1}),window.addEventListener("wheel",r,{passive:!1}),window.addEventListener("resize",()=>this.g_aPW()),this.g_bek=new Set,this.g_bel=new WeakSet,this.g_aWS=!1}g_bef(){return document.addEventListener("visibilitychange",()=>this.g_aSL(document.hidden)),document.addEventListener("pause",()=>this.g_aSL(!0)),document.addEventListener("resume",()=>this.g_aSL(!1)),{isSuspended:!!(document.hidden||b)}}g_bck(){window.addEventListener("focus",()=>this.g_bem("window-focus")),window.addEventListener("blur",()=>{this.g_bem("window-blur",{parentHasFocus:e()}),this.g_bej=0}),window.addEventListener("fullscreenchange",()=>this.g_aPX()),window.addEventListener("webkitfullscreenchange",()=>this.g_aPX()),window.addEventListener("mozfullscreenchange",()=>this.g_aPX()),window.addEventListener("fullscreenerror",e=>this.g_aPY(e)),window.addEventListener("webkitfullscreenerror",e=>this.g_aPY(e)),window.addEventListener("mozfullscreenerror",e=>this.g_aPY(e)),window.addEventListener("keydown",e=>this.g_ben("keydown",e)),window.addEventListener("keyup",e=>this.g_ben("keyup",e)),window.addEventListener("dblclick",e=>this.g_beo("dblclick",e,s)),window.addEventListener("wheel",e=>this.g_bep("wheel",e)),"undefined"==typeof PointerEvent?(window.addEventListener("mousedown",e=>this.g_beq("pointerdown",e)),window.addEventListener("mousemove",e=>this.g_beq("pointermove",e)),window.addEventListener("mouseup",e=>this.g_beq("pointerup",e)),window.addEventListener("touchstart",e=>this.g_ber("pointerdown",e)),window.addEventListener("touchmove",e=>this.g_ber("pointermove",e)),window.addEventListener("touchend",e=>this.g_ber("pointerup",e)),window.addEventListener("touchcancel",e=>this.g_ber("pointercancel",e))):(window.addEventListener("pointerdown",e=>this.g_bes("pointerdown",e)),window.addEventListener("pointermove",e=>this.g_bes("pointermove",e)),window.addEventListener("pointerup",e=>this.g_bes("pointerup",e)),window.addEventListener("pointercancel",e=>this.g_bes("pointercancel",e))),window.addEventListener("mousedown",e=>this.g_beo("mousedown",e,g)),window.addEventListener("mousemove",e=>this.g_beo("mousemove",e,g)),window.addEventListener("mouseup",e=>this.g_beo("mouseup",e,g));const _=()=>this.g_bdQ();window.addEventListener("pointerup",_,!0),window.addEventListener("touchend",_,!0),window.addEventListener("click",_,!0),window.addEventListener("keydown",_,!0),window.addEventListener("gamepadconnected",_,!0)}g_beh(){this.g_bdY||(this.g_bdY=!0,window.addEventListener("deviceorientation",e=>this.g_a_e(e)))}g_bei(){this.g_bdZ||(this.g_bdZ=!0,window.addEventListener("devicemotion",e=>this.g_a_f(e)))}g_bem(e,g){this.g_bcl(e,g||null,{dispatchRuntimeEvent:!0})}g_aPW(){const e=window.innerWidth,g=window.innerHeight;this.g_bem("window-resize",{innerWidth:e,innerHeight:g,devicePixelRatio:window.devicePixelRatio}),this.g_aSP.g_aTe()&&(-1!==this.g_bdW&&clearTimeout(this.g_bdW),this.g_bet(e,g,0))}g_beu(e,g,_){-1!==this.g_bdW&&clearTimeout(this.g_bdW),this.g_bdW=setTimeout(()=>this.g_bet(e,g,_),48)}g_bet(g,_,t){const n=window.innerWidth,b=window.innerHeight;this.g_bdW=-1,n!=g||b!=_?this.g_bem("window-resize",{innerWidth:n,innerHeight:b,devicePixelRatio:window.devicePixelRatio}):10>t&&this.g_beu(n,b,t+1)}g_bec(e){this.g_bdX=e.targetOrientation}g_bev(){const e=this.g_bdX;if(screen.orientation&&screen.orientation.lock)screen.orientation.lock(e).catch(e=>console.warn("[Construct 3] Failed to lock orientation: ",e));else try{let g=!1;screen.lockOrientation?g=screen.lockOrientation(e):screen.webkitLockOrientation?g=screen.webkitLockOrientation(e):screen.mozLockOrientation?g=screen.mozLockOrientation(e):screen.msLockOrientation&&(g=screen.msLockOrientation(e)),g||console.warn("[Construct 3] Failed to lock orientation")}catch(e){console.warn("[Construct 3] Failed to lock orientation: ",e)}}g_aPX(){const e=g_bcQ.g_aQh();e&&"any"!==this.g_bdX&&this.g_bev(),this.g_bcl("fullscreenchange",{isFullscreen:e,innerWidth:window.innerWidth,innerHeight:window.innerHeight})}g_aPY(e){console.warn("[Construct 3] Fullscreen request failed: ",e),this.g_bcl("fullscreenerror",{isFullscreen:g_bcQ.g_aQh(),innerWidth:window.innerWidth,innerHeight:window.innerHeight})}g_aSL(e){e?this.g_aSP.g_bdg():this.g_aSP.g_bdN(),this.g_bcl("visibilitychange",{hidden:e})}g_ben(e,g){this.g_bcp(e,{code:g.code,key:g.key,which:g.which,repeat:g.repeat,altKey:g.altKey,ctrlKey:g.ctrlKey,metaKey:g.metaKey,shiftKey:g.shiftKey,timeStamp:g.timeStamp},s)}g_bep(e,g){this.g_bcl(e,{clientX:g.clientX,clientY:g.clientY,deltaX:g.deltaX,deltaY:g.deltaY,deltaZ:g.deltaZ,deltaMode:g.deltaMode,timeStamp:g.timeStamp},s)}g_beo(e,g,t){_(g)||("mousedown"===e&&window!==window.top&&window.focus(),this.g_bcp(e,{button:g.button,buttons:g.buttons,clientX:g.clientX,clientY:g.clientY,timeStamp:g.timeStamp},t))}g_beq(e,g){if(!_(g)){"pointerdown"===e&&window!==window.top&&window.focus();const _=this.g_bej;"pointerdown"===e&&0!==_?e="pointermove":"pointerup"==e&&0!==g.buttons&&(e="pointermove"),this.g_bcp(e,{pointerId:1,pointerType:"mouse",button:g.button,buttons:g.buttons,lastButtons:_,clientX:g.clientX,clientY:g.clientY,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,timeStamp:g.timeStamp},s),this.g_bej=g.buttons}}g_bes(e,g){"pointerdown"===e&&window!==window.top&&window.focus();let _=0;"mouse"===g.pointerType&&(_=this.g_bej),this.g_bcp(e,{pointerId:g.pointerId,pointerType:g.pointerType,button:g.button,buttons:g.buttons,lastButtons:_,clientX:g.clientX,clientY:g.clientY,width:g.width||0,height:g.height||0,pressure:g.pressure||0,tangentialPressure:g.tangentialPressure||0,tiltX:g.tiltX||0,tiltY:g.tiltY||0,twist:g.twist||0,timeStamp:g.timeStamp},s),"mouse"===g.pointerType&&(this.g_bej=g.buttons)}g_ber(e,g){"pointerdown"===e&&window!==window.top&&window.focus();for(let _=0,t=g.changedTouches.length;_<t;++_){const t=g.changedTouches[_];this.g_bcp(e,{pointerId:t.identifier,pointerType:"touch",button:0,buttons:0,lastButtons:0,clientX:t.clientX,clientY:t.clientY,width:2*(t.radiusX||t.webkitRadiusX||0),height:2*(t.radiusY||t.webkitRadiusY||0),pressure:t.force||t.webkitForce||0,tangentialPressure:0,tiltX:0,tiltY:0,twist:t.rotationAngle||0,timeStamp:g.timeStamp},s)}}g_a_e(e){this.g_bem("deviceorientation",{alpha:e.alpha||0,beta:e.beta||0,gamma:e.gamma||0,timeStamp:e.timeStamp})}g_a_f(_){let t=0,n=0,a=0,o=0,r=0,s=0;const l=_.accelerationIncludingGravity;l&&(t=l.x||0,n=l.y||0,a=l.z||0);const h=_.acceleration;h&&(o=h.x||0,r=h.y||0,s=h.z||0),this.g_bem("devicemotion",{acceleration:{x:o,y:r,z:s},accelerationWithG:{x:t,y:n,z:a},timeStamp:_.timeStamp})}g_bd$(e){const g=this.g_bcv(),_=g.g_bdh();_.style.width=e.styleWidth+"px",_.style.height=e.styleHeight+"px",_.style.marginLeft=e.marginLeft+"px",_.style.marginTop=e.marginTop+"px",g.g_bdp(),this.g_bdV&&(_.style.display="",this.g_bdV=!1)}g_bea(g){const _=g.url,t=g.filename,n=document.createElement("a"),e=document.body;n.textContent=t,n.href=_,n.download=t,e.appendChild(n),n.click(),e.removeChild(n)}async g_beb(_){const t=_.blob,b=_.width,a=_.height,e=await n(t),i=await self.C3_RasterSvgImage(e,b,a);return await createImageBitmap(i)}g_bdQ(){const e=[...this.g_bek];if(this.g_bek.clear(),!this.g_aWS)for(const g of e){const e=g.play();e&&e.catch(()=>{this.g_bel.has(g)||this.g_bek.add(g)})}}g_bdO(e){if("function"!=typeof e.play)throw new Error("missing play function");this.g_bel.delete(e);let g;try{g=e.play()}catch(g){return void this.g_bek.add(e)}g&&g.catch(()=>{this.g_bel.has(e)||this.g_bek.add(e)})}g_bdP(e){this.g_bek.delete(e),this.g_bel.add(e)}g_DQ(e){this.g_aWS=!!e}g_beg(e){const g=e.show;if(!g)return void(this.g_bd_&&(this.g_bd_.style.display="none"));this.g_bd_||(this.g_bd_=document.createElement("div"),this.g_bd_.id="inspectOutline",document.body.appendChild(this.g_bd_));const _=this.g_bd_;_.style.display="",_.style.left=e.left-1+"px",_.style.top=e.top-1+"px",_.style.width=e.width+2+"px",_.style.height=e.height+2+"px",_.textContent=e.name}g_bed(){window.C3_RegisterSW&&window.C3_RegisterSW()}g_bee(e){window.c3_postToMessagePort&&(e.from="runtime",window.c3_postToMessagePort(e))}g_axy(e,g){return this.g_bcn("js-invoke-function",{name:e,params:g})}};g_bcQ.g_bdL(a)}{const e=document.currentScript.src;self.g_bdo=class{constructor(g){this.g_bew=g,this.g_aQV=e?e.substr(0,e.lastIndexOf("/")+1):g.g_Pk(),this.g_aUN=Math.min(navigator.hardwareConcurrency||2,16),this.g_bex=null,this.g_bey=[],this.g_aUL=null,this.g_bez=null}async g_aMd(){if(this.g_beA)throw new Error("already initialised");this.g_beA=!0;const e=this.g_bew.g_bdt("dispatchworker.js");this.g_bex=await this.g_bew.g_bdu(e,this.g_aQV,{name:"DispatchWorker"});const g=new MessageChannel;this.g_aUL=g.port1,this.g_bex.postMessage({type:"_init","in-port":g.port2},[g.port2]),this.g_bez=await this.g_bdG()}async g_bdG(){const g=this.g_bey.length,_=this.g_bew.g_bdt("jobworker.js"),t=await this.g_bew.g_bdu(_,this.g_aQV,{name:"JobWorker"+g}),n=new MessageChannel,b=new MessageChannel;return this.g_bex.postMessage({type:"_addJobWorker",port:n.port1},[n.port1]),t.postMessage({type:"init",number:g,"dispatch-port":n.port2,"output-port":b.port2},[n.port2,b.port2]),this.g_bey.push(t),b.port1}g_bdy(){return{inputPort:this.g_aUL,outputPort:this.g_bez,maxNumWorkers:this.g_aUN}}g_bdC(){return[this.g_aUL,this.g_bez]}}}if("use strict",window.C3_IsSupported){"undefined"!=typeof OffscreenCanvas;window.c3_runtimeInterface=new g_bcQ({g_bcS:!1,g_bdz:"workermain.js",g_bdk:["scripts/c3runtime.js"],g_bcV:"scripts/",g_bdA:[],g_fE:"html5"})}{function e(e,g){return e.length===g.length&&(e===g||e.toLowerCase()===g.toLowerCase())}const g=class extends g_bch{constructor(e){super(e,"audio"),this.g_beB=null,this.g_beC=null,this.g_beD=!1,this.g_beE=()=>this.g_beF(),this.g_beG=[],this.g_beH=[],this.g_beI=null,this.g_beJ="",this.g_beK=-1,this.g_beL=new Map,this.g_aWR=1,this.g_aWS=!1,this.g_aWE=0,this.g_aL$=1,this.g_aSi=0,this.g_aWH="HRTF",this.g_aWI="inverse",this.g_beM=600,this.g_aWN=1e4,this.g_aWO=1,this.g_beN=!1,this.g_beO=!1,this.g_beP=this.g_aSP.g_ahS("audio/webm; codecs=opus"),this.g_beQ=new Map,this.g_beR=new Set,this.g_beS=!1,this.g_beT="",this.g_beU=null,self.C3Audio_OnMicrophoneStream=(e,g)=>this.g_beV(e,g),this.g_beW=null,self.C3Audio_GetOutputStream=()=>this.g_beX(),this.g_bcu([["create-audio-context",e=>this.g_beY(e)],["play",e=>this.g_beZ(e)],["stop",e=>this.g_be_(e)],["stop-all",()=>this.g_be$()],["set-paused",e=>this.g_bfa(e)],["set-volume",e=>this.g_bfb(e)],["fade-volume",e=>this.g_bfc(e)],["set-master-volume",e=>this.g_bfd(e)],["set-muted",e=>this.g_bfe(e)],["set-silent",e=>this.g_bff(e)],["set-looping",e=>this.g_bfg(e)],["set-playback-rate",e=>this.g_bfh(e)],["seek",e=>this.g_bfi(e)],["preload",e=>this.g_bfj(e)],["unload",e=>this.g_amP(e)],["unload-all",()=>this.g_bfk()],["set-suspended",e=>this.g_bfl(e)],["add-effect",e=>this.g_bfm(e)],["set-effect-param",e=>this.g_bfn(e)],["remove-effects",e=>this.g_bfo(e)],["tick",e=>this.g_asG(e)],["load-state",e=>this.g_bfp(e)]])}async g_beY(e){e.isWKWebView&&(this.g_beN=!0),this.g_aWE=e.timeScaleMode,this.g_aWH=["equalpower","HRTF","soundfield"][e.panningModel],this.g_aWI=["linear","inverse","exponential"][e.distanceModel],this.g_beM=e.refDistance,this.g_aWN=e.maxDistance,this.g_aWO=e.rolloffFactor;const g={latencyHint:e.latencyHint};if("undefined"!=typeof AudioContext)this.g_beB=new AudioContext(g);else if("undefined"!=typeof webkitAudioContext)this.g_beB=new webkitAudioContext(g);else throw new Error("Web Audio API not supported");this.g_beC=this.g_beB.createGain(),this.g_beC.connect(this.g_beB.destination);const _=e.listenerPos;this.g_beB.listener.setPosition(_[0],_[1],_[2]),this.g_beB.listener.setOrientation(0,0,1,0,-1,0),window.addEventListener("pointerup",this.g_beE,!0),window.addEventListener("touchend",this.g_beE,!0),window.addEventListener("click",this.g_beE,!0),window.addEventListener("keydown",this.g_beE,!0),self.C3_GetAudioContextCurrentTime=()=>this.g_bfq();try{await Promise.all(e.preloadList.map(e=>this.g_bfr(e.originalUrl,e.url,e.type,!1)))}catch(e){console.error("[Construct 3] Preloading sounds failed: ",e)}return{sampleRate:this.g_beB.sampleRate}}g_beF(){if(!this.g_beD){const e=this.g_beB;"suspended"===e.state&&e.resume&&e.resume();const g=e.createBuffer(1,220,22050),_=e.createBufferSource();_.buffer=g,_.connect(e.destination),_.start(0),"running"===e.state&&(this.g_beD=!0,window.removeEventListener("pointerup",this.g_beE,!0),window.removeEventListener("touchend",this.g_beE,!0),window.removeEventListener("click",this.g_beE,!0),window.removeEventListener("keydown",this.g_beE,!0),this.g_beE=null)}}g_bfs(){return this.g_beB}g_bfq(){return this.g_beB.currentTime}g_bft(){return this.g_beC}g_bfu(e){const g=this.g_beQ.get(e.toLowerCase());return g?g[0].g_bfv():this.g_bft()}g_bfw(e,g){e=e.toLowerCase();let _=this.g_beQ.get(e);_||(_=[],this.g_beQ.set(e,_)),g.g_aNM(_.length),g.g_bfx(e),_.push(g),this.g_bfy(e)}g_bfy(e){let g=this.g_bft();const _=this.g_beQ.get(e);if(_&&_.length){g=_[0].g_bfv();for(let e=0,g=_.length;e<g;++e){const t=_[e];e+1===g?t.g_bfz(this.g_bft()):t.g_bfz(_[e+1].g_bfv())}}for(const _ of this.g_bfA(e))_.g_bfB(g);this.g_beU&&this.g_beT===e&&(this.g_beU.disconnect(),this.g_beU.connect(g))}g_bfC(){return this.g_aWR}g_Dx(){return this.g_aWS}g_bfD(){return this.g_aWE}g_asV(){return this.g_aL$}g_alC(){return this.g_aSi}g_bfE(){return this.g_beN}g_bfF(){return this.g_beP}g_bfG(){this.g_beO=!0}g_bfH(){return this.g_aWH}g_bfI(){return this.g_aWI}g_bfJ(){return this.g_beM}g_bfK(){return this.g_aWN}g_bfL(){return this.g_aWO}g_bfM(e,g){return g?this.g_aSP.g_aIy(e).then(e=>{const g=this.g_beB.createBuffer(1,e.length,48e3),_=g.getChannelData(0);return _.set(e),g}):new Promise((g,_)=>{this.g_beB.decodeAudioData(e,g,_)})}g_bdO(e){this.g_aSP.g_bdO(e)}g_bdP(e){this.g_aSP.g_bdP(e)}g_bfN(g){let _=0;for(let t=0,e=this.g_beH.length;t<e;++t){const n=this.g_beH[t];this.g_beH[_]=n,n.g_bfO()===g?n.g_OH():++_}this.g_beH.length=_}g_bfP(){let e=0;for(let g=0,_=this.g_beG.length;g<_;++g){const _=this.g_beG[g];this.g_beG[e]=_,_.g_bfQ()?_.g_OH():++e}this.g_beG.length=e}*g_bfA(g){if(g)for(const _ of this.g_beH)e(_.g_bfR(),g)&&(yield _);else this.g_beI&&!this.g_beI.g_bfS()&&(yield this.g_beI)}async g_bfr(g,_,t,n,b){for(const e of this.g_beG)if(e.g_bfT()===_)return await e.g_Jz(),e;if(b)return null;n&&(this.g_beN||this.g_beO)&&this.g_bfP();const e=g_bfU.g_Zd(this,g,_,t,n);return this.g_beG.push(e),await e.g_Jz(),e}async g_bfV(_,t,n,b,a){for(const e of this.g_beH)if(e.g_bfT()===t&&(e.g_bfW()||a))return e.g_bfX(b),e;const e=await this.g_bfr(_,t,n,a),i=e.g_aIM(b);return this.g_beH.push(i),i}g_bfY(e){let g=this.g_beL.get(e);if(!g){let _=null;const t=new Promise(e=>_=e);g={g_bfZ:0,promise:t,resolve:_},this.g_beL.set(e,g)}g.g_bfZ++}g_bf_(e){const g=this.g_beL.get(e);if(!g)throw new Error("expected pending tag");g.g_bfZ--,0===g.g_bfZ&&(g.resolve(),this.g_beL.delete(e))}g_bf$(e){e||(e=this.g_beJ);const g=this.g_beL.get(e);return g?g.promise:Promise.resolve()}g_bga(){if(0<this.g_beR.size)return void this.g_aGO();for(const e of this.g_beH)if(e.g_JJ())return void this.g_aGO()}g_aqF(){for(const e of this.g_beR)e.g_aqF();const e=this.g_bfq();for(const g of this.g_beH)g.g_aqF(e);const g=this.g_beH.filter(e=>e.g_JJ()).map(e=>e.g_bgb());this.g_bcl("state",{tickCount:this.g_beK,audioInstances:g,analysers:[...this.g_beR].map(e=>e.g_bgc())}),0===g.length&&0===this.g_beR.size&&this.g_aGB()}g_bgd(e,g){this.g_bcl("trigger",{type:e,tag:g})}async g_beZ(_){const t=_.originalUrl,n=_.url,b=_.type,a=_.isMusic,e=_.tag,o=_.isLooping,g=_.vol,r=_.pos,i=_.panning;let c=_.off;if(0<c&&!_.trueClock)if(this.g_beB.getOutputTimestamp){const e=this.g_beB.getOutputTimestamp();c=c-e.performanceTime/1e3+e.contextTime}else c=c-performance.now()/1e3+this.g_beB.currentTime;this.g_beJ=e,this.g_bfY(e);try{this.g_beI=await this.g_bfV(t,n,b,e,a),i?(this.g_beI.g_bge(!0),this.g_beI.g_bgf(i.x,i.y,i.angle,i.innerAngle,i.outerAngle,i.outerGain),i.hasOwnProperty("uid")&&this.g_beI.g_bgg(i.uid)):this.g_beI.g_bge(!1),this.g_beI.g_DA(o,g,r,c)}catch(e){return void console.error("[Construct 3] Audio: error starting playback: ",e)}finally{this.g_bf_(e)}this.g_aGO()}g_be_(e){const g=e.tag;for(const _ of this.g_bfA(g))_.g_DM()}g_be$(){for(const e of this.g_beH)e.g_DM()}g_bfa(e){const g=e.tag,_=e.paused;for(const t of this.g_bfA(g))_?t.g_bgh():t.g_aqC();this.g_bga()}g_bfb(e){const g=e.tag,_=e.vol;for(const t of this.g_bfA(g))t.g_DI(_)}async g_bfc(g){const _=g.tag,t=g.vol,n=g.duration,b=g.stopOnEnd;await this.g_bf$(_);for(const e of this.g_bfA(_))e.g_aXr(t,n,b);this.g_bga()}g_bfd(e){this.g_aWR=e.vol;for(const g of this.g_beH)g.g_bgi()}g_bfe(e){const g=e.tag,_=e.isMuted;for(const t of this.g_bfA(g))t.g_DH(_)}g_bff(e){this.g_aWS=e.isSilent,this.g_aSP.g_DQ(this.g_aWS);for(const g of this.g_beH)g.g_bgj()}g_bfg(e){const g=e.tag,_=e.isLooping;for(const t of this.g_bfA(g))t.g_DG(_)}g_bfh(e){const g=e.tag,_=e.rate;for(const t of this.g_bfA(g))t.g_DL(_)}g_bfi(e){const g=e.tag,_=e.pos;for(const t of this.g_bfA(g))t.g_DP(_)}async g_bfj(g){const _=g.originalUrl,t=g.url,n=g.type,b=g.isMusic;try{await this.g_bfV(_,t,n,"",b)}catch(e){console.error("[Construct 3] Audio: error preloading: ",e)}}async g_amP(g){const _=g.url,t=g.type,n=g.isMusic,b=await this.g_bfr("",_,t,n,!0);if(b){b.g_OH();const e=this.g_beG.indexOf(b);-1!==e&&this.g_beG.splice(e,1)}}g_bfk(){for(const e of this.g_beG)e.g_OH();this.g_beG.length=0}g_bfl(e){const g=e.isSuspended;!g&&this.g_beB.resume&&this.g_beB.resume();for(const _ of this.g_beH)_.g_aTz(g);g&&this.g_beB.suspend&&this.g_beB.suspend()}g_asG(e){if(this.g_aL$=e.timeScale,this.g_aSi=e.gameTime,this.g_beK=e.tickCount,0!==this.g_aWE)for(const e of this.g_beH)e.g_bgk();const g=e.listenerPos;g&&this.g_beB.listener.setPosition(g[0],g[1],g[2]);for(const g of e.instPans){const e=g.uid;for(const _ of this.g_beH)_.g_ajG()===e&&_.g_bgl(g.x,g.y,g.angle)}}async g_bfm(g){const _=g.type,t=g.tag,n=g.params;let a;if("filter"===_)a=new g_bgm(this,...n);else if("delay"===_)a=new g_bgn(this,...n);else if("convolution"===_){let e=null;try{e=await this.g_bfr(g.bufferOriginalUrl,g.bufferUrl,g.bufferType,!1)}catch(e){return void console.log("[Construct 3] Audio: error loading convolution: ",e)}a=new g_bgo(this,e.g_bgp(),...n),a.g_bgq(g.bufferOriginalUrl,g.bufferUrl,g.bufferType)}else if("flanger"===_)a=new g_bgr(this,...n);else if("phaser"===_)a=new g_bgs(this,...n);else if("gain"===_)a=new g_bgt(this,...n);else if("tremolo"===_)a=new g_bgu(this,...n);else if("ringmod"===_)a=new g_bgv(this,...n);else if("distortion"===_)a=new g_bgw(this,...n);else if("compressor"===_)a=new g_bgx(this,...n);else if("analyser"===_)a=new g_bgy(this,...n);else throw new Error("invalid effect type");this.g_bfw(t,a),this.g_bgz()}g_bfn(_){const t=_.tag,n=_.index,b=_.param,a=_.value,e=_.ramp,i=_.time,g=this.g_beQ.get(t);!g||0>n||n>=g.length||(g[n].g_bgA(b,a,e,i),this.g_bgz())}g_bfo(e){const g=e.tag.toLowerCase(),_=this.g_beQ.get(g);if(_&&_.length){for(const e of _)e.g_OH();this.g_beQ.delete(g),this.g_bfy(g)}}g_bgB(e){this.g_beR.add(e),this.g_bga()}g_bgC(e){this.g_beR.delete(e)}g_bgz(){this.g_beS||(this.g_beS=!0,Promise.resolve().then(()=>this.g_bgD()))}g_bgD(){const e={};for(const[g,_]of this.g_beQ)e[g]=_.map(e=>e.g_bgb());this.g_bcl("fxstate",{fxstate:e}),this.g_beS=!1}async g_bfp(e){const g=e.saveLoadMode;if(3!==g)for(const e of this.g_beH)e.g_bfQ()&&1===g||!e.g_bfQ()&&2===g||e.g_DM();for(const g of this.g_beQ.values())for(const e of g)e.g_OH();this.g_beQ.clear(),this.g_aL$=e.timeScale,this.g_aSi=e.gameTime;const _=e.listenerPos;this.g_beB.listener.setPosition(_[0],_[1],_[2]),this.g_aWS=e.isSilent,this.g_aSP.g_DQ(this.g_aWS),this.g_aWR=e.masterVolume;const t=[];for(const g of Object.values(e.effects))t.push(Promise.all(g.map(e=>this.g_bfm(e))));await Promise.all(t),await Promise.all(e.playing.map(e=>this.g_bgE(e,g))),this.g_bga()}async g_bgE(_,t){if(3===t)return;const n=_.bufferOriginalUrl,b=_.bufferUrl,a=_.bufferType,e=_.isMusic,o=_.tag,g=_.isLooping,r=_.volume,i=_.playbackTime;if(e&&1===t)return;if(!e&&2===t)return;let c=null;try{c=await this.g_bfV(n,b,a,o,e)}catch(e){return void console.error("[Construct 3] Audio: error loading audio state: ",e)}c.g_bgF(_.pan),c.g_DA(g,r,i,0),_.isPlaying||c.g_bgh(),c.g_bgG(_)}g_beV(e,g){this.g_beU&&this.g_beU.disconnect(),this.g_beT=g.toLowerCase(),this.g_beU=this.g_beB.createMediaStreamSource(e),this.g_beU.connect(this.g_bfu(this.g_beT))}g_beX(){return this.g_beW||(this.g_beW=this.g_beB.createMediaStreamDestination(),this.g_beC.connect(this.g_beW)),this.g_beW.stream}};g_bcQ.g_bdL(g)}"use strict",self.g_bfU=class{constructor(g,_,t,n,b){this.g_bgH=g,this.g_bgI=_,this.g_aif=t,this.g_T$=n,this.g_bgJ=b,this.g_bgK="",this.g_bgL="not-loaded",this.g_aik=null}g_OH(){this.g_bgL="not-loaded",this.g_bgH=null,this.g_aik=null}static g_Zd(g,_,t,n,b){const e="audio/webm; codecs=opus"===n&&!g.g_bfF();return b&&e&&g.g_bfG(),!b||g.g_bfE()||e?new g_bgM(g,_,t,n,b,e):new g_bgN(g,_,t,n,b)}g_aIM(e){return"html5"===this.g_bgK?new g_bgO(this.g_bgH,this,e):new g_bgP(this.g_bgH,this,e)}g_amJ(){}g_Jz(){return this.g_aik||(this.g_aik=this.g_amJ()),this.g_aik}g_ail(){}g_bgQ(){}g_bgR(){return"failed"===this.g_bgL}g_bfs(){return this.g_bgH.g_bfs()}g_bgS(){return this.g_bgK}g_bgT(){return this.g_bgI}g_bfT(){return this.g_aif}g_bgU(){return this.g_T$}g_bfQ(){return this.g_bgJ}g_aKa(){}},"use strict",self.g_bgN=class extends g_bfU{constructor(g,_,t,n,b){super(g,_,t,n,b),this.g_bgK="html5",this.g_bgV=new Audio,this.g_bgV.crossOrigin="anonymous",this.g_bgV.autoplay=!1,this.g_bgV.preload="auto",this.g_bgW=null,this.g_bgX=null,this.g_bgY=!1,this.g_bgV.addEventListener("canplaythrough",()=>this.g_bgY=!0),this.g_bgZ=this.g_bfs().createGain(),this.g_bg_=null,this.g_bgV.addEventListener("canplay",()=>{this.g_bgW&&(this.g_bgL="loaded",this.g_bgW(),this.g_bgW=null,this.g_bgX=null),this.g_bg_||!this.g_bgV||(this.g_bg_=this.g_bfs().createMediaElementSource(this.g_bgV),this.g_bg_.connect(this.g_bgZ))}),this.onended=null,this.g_bgV.addEventListener("ended",()=>{this.onended&&this.onended()}),this.g_bgV.addEventListener("error",e=>this.g_aYf(e))}g_OH(){this.g_bgH.g_bfN(this),this.g_bgZ.disconnect(),this.g_bgZ=null,this.g_bg_.disconnect(),this.g_bg_=null,this.g_bgV&&!this.g_bgV.paused&&this.g_bgV.pause(),this.onended=null,this.g_bgV=null,super.g_OH()}g_amJ(){return this.g_bgL="loading",new Promise((e,g)=>{this.g_bgW=e,this.g_bgX=g,this.g_bgV.src=this.g_aif})}g_aYf(e){console.error(`[Construct 3] Audio '${this.g_aif}' error: `,e),this.g_bgX&&(this.g_bgL="failed",this.g_bgX(e),this.g_bgW=null,this.g_bgX=null)}g_ail(){const e=4<=this.g_bgV.readyState;return e&&(this.g_bgY=!0),e||this.g_bgY}g_bgQ(){return this.g_ail()}g_bg$(){return this.g_bgV}g_bha(){return this.g_bgZ}g_aKa(){return this.g_bgV.duration}},"use strict",self.g_bgM=class extends g_bfU{constructor(g,_,t,n,b,e){super(g,_,t,n,b),this.g_bgK="webaudio",this.g_bhb=null,this.g_bhc=null,this.g_bhd=!!e}g_OH(){this.g_bgH.g_bfN(this),this.g_bhb=null,this.g_bhc=null,super.g_OH()}async g_bhe(){if(this.g_bhb)return this.g_bhb;const e=this.g_bgH.g_bcv();if("cordova"===e.g_aUj()&&e.g_PQ(this.g_aif))this.g_bhb=await e.g_ahx(this.g_aif);else{const e=await fetch(this.g_aif);if(!e.ok)throw new Error(`error fetching audio data: ${e.status} ${e.statusText}`);this.g_bhb=await e.arrayBuffer()}}async g_bhf(){return this.g_bhc?this.g_bhc:void(this.g_bhc=await this.g_bgH.g_bfM(this.g_bhb,this.g_bhd),this.g_bhb=null)}async g_amJ(){try{this.g_bgL="loading",await this.g_bhe(),await this.g_bhf(),this.g_bgL="loaded"}catch(e){this.g_bgL="failed",console.error(`[Construct 3] Failed to load audio '${this.g_aif}': `,e)}}g_ail(){return!!(this.g_bhb||this.g_bhc)}g_bgQ(){return!!this.g_bhc}g_bgp(){return this.g_bhc}g_aKa(){return this.g_bhc?this.g_bhc.duration:0}},"use strict";{function _(g){return g*e}const e=180/Math.PI;self.g_bhg=class{constructor(e,g,_){this.g_bgH=e,this.g_acy=g,this.g_bhh=_,this.g_bhi=this.g_bfs().createGain(),this.g_bhi.connect(this.g_bft()),this.g_bhj=null,this.g_bhk=!1,this.g_awV=!0,this.g_bhl=!1,this.g_bhm=!1,this.g_aDX=!1,this.g_bhn=1,this.g_bho=!1,this.g_aoU=1;const t=this.g_bgH.g_bfD();this.g_bhp=1===t&&!this.g_bfQ()||2===t,this.g_bhq=-1,this.g_bhr=-1,this.g_bhs=!1}g_OH(){this.g_bgH=null,this.g_acy=null,this.g_bhj&&(this.g_bhj.disconnect(),this.g_bhj=null),this.g_bhi.disconnect(),this.g_bhi=null}g_bfs(){return this.g_bgH.g_bfs()}g_bft(){return this.g_bgH.g_bfu(this.g_bhh)}g_bfC(){return this.g_bgH.g_bfC()}g_bht(){return this.g_bhp?this.g_bgH.g_alC():performance.now()/1e3}g_bgT(){return this.g_acy.g_bgT()}g_bfT(){return this.g_acy.g_bfT()}g_bgU(){return this.g_acy.g_bgU()}g_bfO(){return this.g_acy}g_bfQ(){return this.g_acy.g_bfQ()}g_bfX(e){this.g_bhh=e}g_bfR(){return this.g_bhh}g_bfS(){}g_bfW(){}g_aqg(){return!this.g_awV&&!this.g_bhl&&!this.g_bfS()}g_JJ(){return!this.g_awV&&!this.g_bfS()}g_bhu(){}g_aKa(e){let g=this.g_acy.g_aKa();return e&&(g/=this.g_aoU||.001),g}g_DA(){}g_DM(){}g_bgh(){}g_bhv(){return this.g_bhl}g_aqC(){}g_DI(e){this.g_bhn=e,this.g_bhi.gain.cancelScheduledValues(0),this.g_bhr=-1,this.g_bhi.gain.value=this.g_bhw()}g_aXr(g,_,t){if(!this.g_bhx()){const n=this.g_bhi.gain;n.cancelScheduledValues(0);const b=this.g_bgH.g_bfq(),e=b+_;n.setValueAtTime(this.g_bhn,b),n.linearRampToValueAtTime(g,e),this.g_bhn=g,this.g_bhr=e,this.g_bhs=t}}g_bgi(){this.g_DI(this.g_bhn)}g_aqF(e){-1!==this.g_bhr&&e>=this.g_bhr&&(this.g_bhr=-1,this.g_bhs&&this.g_DM(),this.g_bgH.g_bgd("fade-ended",this.g_bhh))}g_bhw(){const e=this.g_bhn*this.g_bfC();return isFinite(e)?e:0}g_DH(e){e=!!e,this.g_bho===e||(this.g_bho=e,this.g_bgj())}g_bhx(){return this.g_bho}g_Dx(){return this.g_bgH.g_Dx()}g_bgj(){}g_DG(){}g_aBN(){return this.g_aDX}g_DL(e){this.g_aoU===e||(this.g_aoU=e,this.g_bgk())}g_bgk(){}g_aqB(){return this.g_aoU}g_DP(){}g_aTz(){}g_bge(e){e=!!e,this.g_bhk===e||(this.g_bhk=e,this.g_bhk?(!this.g_bhj&&(this.g_bhj=this.g_bfs().createPanner(),this.g_bhj.panningModel=this.g_bgH.g_bfH(),this.g_bhj.distanceModel=this.g_bgH.g_bfI(),this.g_bhj.refDistance=this.g_bgH.g_bfJ(),this.g_bhj.maxDistance=this.g_bgH.g_bfK(),this.g_bhj.rolloffFactor=this.g_bgH.g_bfL()),this.g_bhi.disconnect(),this.g_bhi.connect(this.g_bhj),this.g_bhj.connect(this.g_bft())):(this.g_bhj.disconnect(),this.g_bhi.disconnect(),this.g_bhi.connect(this.g_bft())))}g_bgf(t,n,b,a,e,i){this.g_bhk&&(this.g_bgl(t,n,b),this.g_bhj.coneInnerAngle=_(a),this.g_bhj.coneOuterAngle=_(e),this.g_bhj.coneOuterGain=i)}g_bgl(e,g,_){this.g_bhk&&(this.g_bhj.setPosition(e,g,0),this.g_bhj.setOrientation(Math.cos(_),Math.sin(_),0))}g_bgg(e){this.g_bhq=e}g_ajG(){return this.g_bhq}g_bhy(){}g_bfB(e){const g=this.g_bhj||this.g_bhi;g.disconnect(),g.connect(e)}g_bgb(){return{tag:this.g_bhh,duration:this.g_aKa(),volume:this.g_bhn,isPlaying:this.g_aqg(),playbackTime:this.g_bhu(),playbackRate:this.g_aqB(),uid:this.g_bhq,bufferOriginalUrl:this.g_bgT(),bufferUrl:"",bufferType:this.g_bgU(),isMusic:this.g_bfQ(),isLooping:this.g_aBN(),isMuted:this.g_bhx(),resumePosition:this.g_bhy(),pan:this.g_bhz()}}g_bgG(e){this.g_DL(e.playbackRate),this.g_DH(e.isMuted)}g_bhz(){if(!this.g_bhj)return null;const e=this.g_bhj;return{pos:[e.positionX.value,e.positionY.value,e.positionZ.value],orient:[e.orientationX.value,e.orientationY.value,e.orientationZ.value],cia:e.coneInnerAngle,coa:e.coneOuterAngle,cog:e.coneOuterGain,uid:this.g_bhq}}g_bgF(e){if(!e)return void this.g_bge(!1);this.g_bge(!0);const g=this.g_bhj;g.setPosition(...g.pos),g.setOrientation(...g.orient),g.coneInnerAngle=g.cia,g.coneOuterAngle=g.coa,g.coneOuterGain=g.cog,this.g_bhq=g.uid}}}"use strict",self.g_bgO=class extends g_bhg{constructor(e,g,_){super(e,g,_),this.g_acy.g_bha().connect(this.g_bhi),this.g_acy.onended=()=>this.g_bhA()}g_OH(){this.g_DM(),this.g_acy.g_bha().disconnect(),super.g_OH()}g_bg$(){return this.g_acy.g_bg$()}g_bhA(){this.g_awV=!0,this.g_bhq=-1,this.g_bgH.g_bgd("ended",this.g_bhh)}g_bfS(){return this.g_bg$().ended}g_bfW(){return!!this.g_awV||this.g_bfS()}g_bhu(e){let g=this.g_bg$().currentTime;return e&&(g*=this.g_aoU),this.g_aDX||(g=Math.min(g,this.g_aKa())),g}g_DA(e,g,_){const t=this.g_bg$();if(1!==t.playbackRate&&(t.playbackRate=1),t.loop!==e&&(t.loop=e),this.g_DI(g),t.muted&&(t.muted=!1),t.currentTime!==_)try{t.currentTime=_}catch(e){console.warn(`[Construct 3] Exception seeking audio '${this.g_acy.g_bfT()}' to position '${_}': `,e)}this.g_bgH.g_bdO(t),this.g_awV=!1,this.g_bhl=!1,this.g_aDX=e,this.g_aoU=1}g_DM(){const e=this.g_bg$();e.paused||e.pause(),this.g_bgH.g_bdP(e),this.g_awV=!0,this.g_bhl=!1,this.g_bhq=-1}g_bgh(){if(!(this.g_bhl||this.g_awV||this.g_bfS())){const e=this.g_bg$();e.paused||e.pause(),this.g_bgH.g_bdP(e),this.g_bhl=!0}}g_aqC(){!this.g_bhl||this.g_awV||this.g_bfS()||(this.g_bgH.g_bdO(this.g_bg$()),this.g_bhl=!1)}g_bgj(){this.g_bg$().muted=this.g_bho||this.g_Dx()}g_DG(e){e=!!e,this.g_aDX===e||(this.g_aDX=e,this.g_bg$().loop=e)}g_bgk(){let e=this.g_aoU;this.g_bhp&&(e*=this.g_bgH.g_asV());try{this.g_bg$().playbackRate=e}catch(g){console.warn(`[Construct 3] Unable to set playback rate '${e}':`,g)}}g_DP(e){if(!(this.g_awV||this.g_bfS()))try{this.g_bg$().currentTime=e}catch(g){console.warn(`[Construct 3] Error seeking audio to '${e}': `,g)}}g_bhy(){return this.g_bhu()}g_aTz(e){e?this.g_aqg()?(this.g_bg$().pause(),this.g_bhm=!0):this.g_bhm=!1:this.g_bhm&&(this.g_bgH.g_bdO(this.g_bg$()),this.g_bhm=!1)}},"use strict",self.g_bgP=class extends g_bhg{constructor(e,g,_){super(e,g,_),this.g_bhB=null,this.g_bhC=e=>this.g_bhA(e),this.g_bhD=!0,this.g_bhE=null,this.g_aSd=0,this.g_bhF=0,this.g_bhG=1}g_OH(){this.g_DM(),this.g_bhH(),this.g_bhC=null,super.g_OH()}g_bhH(){this.g_bhB&&this.g_bhB.disconnect(),this.g_bhB=null,this.g_bhE=null}g_bhA(e){this.g_bhl||this.g_bhm||e.target!==this.g_bhE||(this.g_bhD=!0,this.g_awV=!0,this.g_bhq=-1,this.g_bhH(),this.g_bgH.g_bgd("ended",this.g_bhh))}g_bfS(){return!(!this.g_awV&&this.g_bhB&&this.g_bhB.loop)&&!this.g_bhl&&this.g_bhD}g_bfW(){return!this.g_bhB||this.g_awV||this.g_bfS()}g_bhu(e){let g=0;return g=this.g_bhl?this.g_bhF:this.g_bht()-this.g_aSd,e&&(g*=this.g_aoU),this.g_aDX||(g=Math.min(g,this.g_aKa())),g}g_DA(e,g,_,t){this.g_bhG=1,this.g_DI(g),this.g_bhH(),this.g_bhB=this.g_bfs().createBufferSource(),this.g_bhB.buffer=this.g_acy.g_bgp(),this.g_bhB.connect(this.g_bhi),this.g_bhE=this.g_bhB,this.g_bhB.onended=this.g_bhC,this.g_bhB.loop=e,this.g_bhB.start(t,_),this.g_bhD=!1,this.g_awV=!1,this.g_bhl=!1,this.g_aDX=e,this.g_aoU=1,this.g_aSd=this.g_bht()-_}g_DM(){this.g_bhB&&this.g_bhB.stop(0),this.g_awV=!0,this.g_bhl=!1,this.g_bhq=-1}g_bgh(){this.g_bhl||this.g_awV||this.g_bfS()||(this.g_bhF=this.g_bhu(!0),this.g_aDX&&(this.g_bhF%=this.g_aKa()),this.g_bhl=!0,this.g_bhB.stop(0))}g_aqC(){!this.g_bhl||this.g_awV||this.g_bfS()||(this.g_bhH(),this.g_bhB=this.g_bfs().createBufferSource(),this.g_bhB.buffer=this.g_acy.g_bgp(),this.g_bhB.connect(this.g_bhi),this.g_bhE=this.g_bhB,this.g_bhB.onended=this.g_bhC,this.g_bhB.loop=this.g_aDX,this.g_bgi(),this.g_bgk(),this.g_aSd=this.g_bht()-this.g_bhF/(this.g_aoU||.001),this.g_bhB.start(0,this.g_bhF),this.g_bhl=!1)}g_bhw(){return super.g_bhw()*this.g_bhG}g_bgj(){this.g_bhG=this.g_bho||this.g_Dx()?0:1,this.g_bgi()}g_DG(e){e=!!e,this.g_aDX===e||(this.g_aDX=e,this.g_bhB&&(this.g_bhB.loop=e))}g_bgk(){let e=this.g_aoU;this.g_bhp&&(e*=this.g_bgH.g_asV()),this.g_bhB&&(this.g_bhB.playbackRate.value=e)}g_DP(e){this.g_awV||this.g_bfS()||(this.g_bhl?this.g_bhF=e:(this.g_bgh(),this.g_bhF=e,this.g_aqC()))}g_bhy(){return this.g_bhF}g_aTz(e){e?this.g_aqg()?(this.g_bhm=!0,this.g_bhF=this.g_bhu(!0),this.g_aDX&&(this.g_bhF%=this.g_aKa()),this.g_bhB.stop(0)):this.g_bhm=!1:this.g_bhm&&(this.g_bhH(),this.g_bhB=this.g_bfs().createBufferSource(),this.g_bhB.buffer=this.g_acy.g_bgp(),this.g_bhB.connect(this.g_bhi),this.g_bhE=this.g_bhB,this.g_bhB.onended=this.g_bhC,this.g_bhB.loop=this.g_aDX,this.g_bgi(),this.g_bgk(),this.g_aSd=this.g_bht()-this.g_bhF/(this.g_aoU||.001),this.g_bhB.start(0,this.g_bhF),this.g_bhm=!1)}g_bgG(e){super.g_bgG(e),this.g_bhF=e.resumePosition}},"use strict";{function g(e){return Math.pow(10,e/20)}function _(e){return Math.max(Math.min(g(e),1),0)}function t(e){return 20*(Math.log(e)/2.302585092994046)}function n(e){return t(Math.max(Math.min(e,1),0))}function i(e,g){return 1-Math.exp(-g*e)}class e{constructor(e){this.g_bgH=e,this.g_beB=e.g_bfs(),this.g_aiP=-1,this.g_bhh="",this.g_T$="",this.g_bhI=null}g_OH(){this.g_beB=null}g_aNM(e){this.g_aiP=e}g_akg(){return this.g_aiP}g_bfx(e){this.g_bhh=e}g_bfR(){return this.g_bhh}g_bhJ(){return this.g_beB.createGain()}g_bfv(){}g_bfz(){}g_bhK(g,_,t,n){if(g.cancelScheduledValues(0),0===n)return void(g.value=_);const b=this.g_beB.currentTime;n+=b,0===t?g.setValueAtTime(_,n):1===t?(g.setValueAtTime(g.value,b),g.linearRampToValueAtTime(_,n)):2===t?(g.setValueAtTime(g.value,b),g.exponentialRampToValueAtTime(_,n)):void 0}g_bgb(){return{type:this.g_T$,tag:this.g_bhh,params:this.g_bhI}}}self.g_bgm=class extends e{constructor(_,t,n,b,a,e,i){super(_),this.g_T$="filter",this.g_bhI=[t,n,b,a,e,i],this.g_bhL=this.g_bhJ(),this.g_bhM=this.g_bhJ(),this.g_bhM.gain.value=i,this.g_bhN=this.g_bhJ(),this.g_bhN.gain.value=1-i,this.g_bhO=this.g_beB.createBiquadFilter(),this.g_bhO.type=t,this.g_bhO.frequency.value=n,this.g_bhO.detune.value=b,this.g_bhO.Q.value=a,this.g_bhO.gain.vlaue=e,this.g_bhL.connect(this.g_bhO),this.g_bhL.connect(this.g_bhN),this.g_bhO.connect(this.g_bhM)}g_OH(){this.g_bhL.disconnect(),this.g_bhO.disconnect(),this.g_bhM.disconnect(),this.g_bhN.disconnect(),super.g_OH()}g_bfz(e){this.g_bhM.disconnect(),this.g_bhM.connect(e),this.g_bhN.disconnect(),this.g_bhN.connect(e)}g_bfv(){return this.g_bhL}g_bgA(e,g,_,t){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bhI[5]=g,this.g_bhK(this.g_bhM.gain,g,_,t),this.g_bhK(this.g_bhN.gain,1-g,_,t)):1===e?(this.g_bhI[1]=g,this.g_bhK(this.g_bhO.frequency,g,_,t)):2===e?(this.g_bhI[2]=g,this.g_bhK(this.g_bhO.detune,g,_,t)):3===e?(this.g_bhI[3]=g,this.g_bhK(this.g_bhO.Q,g,_,t)):4===e?(this.g_bhI[4]=g,this.g_bhK(this.g_bhO.gain,g,_,t)):void 0}},self.g_bgn=class extends e{constructor(e,g,_,t){super(e),this.g_T$="delay",this.g_bhI=[g,_,t],this.g_bhL=this.g_bhJ(),this.g_bhM=this.g_bhJ(),this.g_bhM.gain.value=t,this.g_bhN=this.g_bhJ(),this.g_bhN.gain.value=1-t,this.g_bhP=this.g_bhJ(),this.g_bhQ=this.g_beB.createDelay(g),this.g_bhQ.delayTime.value=g,this.g_bhR=this.g_bhJ(),this.g_bhR.gain.value=_,this.g_bhL.connect(this.g_bhP),this.g_bhL.connect(this.g_bhN),this.g_bhP.connect(this.g_bhM),this.g_bhP.connect(this.g_bhQ),this.g_bhQ.connect(this.g_bhR),this.g_bhR.connect(this.g_bhP)}g_OH(){this.g_bhL.disconnect(),this.g_bhM.disconnect(),this.g_bhN.disconnect(),this.g_bhP.disconnect(),this.g_bhQ.disconnect(),this.g_bhR.disconnect(),super.g_OH()}g_bfz(e){this.g_bhM.disconnect(),this.g_bhM.connect(e),this.g_bhN.disconnect(),this.g_bhN.connect(e)}g_bfv(){return this.g_bhL}g_bgA(g,t,n,b){0===g?(t=Math.max(Math.min(t/100,1),0),this.g_bhI[2]=t,this.g_bhK(this.g_bhM.gain,t,n,b),this.g_bhK(this.g_bhN.gain,1-t,n,b)):4===g?(this.g_bhI[1]=_(t),this.g_bhK(this.g_bhR.gain,_(t),n,b)):5===g?(this.g_bhI[0]=t,this.g_bhK(this.g_bhQ.delayTime,t,n,b)):void 0}},self.g_bgo=class extends e{constructor(e,g,_,t){super(e),this.g_T$="convolution",this.g_bhI=[_,t],this.g_bhS="",this.g_bhT="",this.g_bhU="",this.g_bhL=this.g_bhJ(),this.g_bhM=this.g_bhJ(),this.g_bhM.gain.value=t,this.g_bhN=this.g_bhJ(),this.g_bhN.gain.value=1-t,this.g_bhV=this.g_beB.createConvolver(),this.g_bhV.normalize=_,this.g_bhV.buffer=g,this.g_bhL.connect(this.g_bhV),this.g_bhL.connect(this.g_bhN),this.g_bhV.connect(this.g_bhM)}g_OH(){this.g_bhL.disconnect(),this.g_bhV.disconnect(),this.g_bhM.disconnect(),this.g_bhN.disconnect(),super.g_OH()}g_bfz(e){this.g_bhM.disconnect(),this.g_bhM.connect(e),this.g_bhN.disconnect(),this.g_bhN.connect(e)}g_bfv(){return this.g_bhL}g_bgA(e,g,_,t){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bhI[1]=g,this.g_bhK(this.g_bhM.gain,g,_,t),this.g_bhK(this.g_bhN.gain,1-g,_,t)):void 0}g_bgq(e,g,_){this.g_bhS=e,this.g_bhT=g,this.g_bhU=_}g_bgb(){const e=super.g_bgb();return e.bufferOriginalUrl=this.g_bhS,e.bufferUrl="",e.bufferType=this.g_bhU,e}},self.g_bgr=class extends e{constructor(g,_,t,n,b,e){super(g),this.g_T$="flanger",this.g_bhI=[_,t,n,b,e],this.g_bhL=this.g_bhJ(),this.g_bhN=this.g_bhJ(),this.g_bhN.gain.value=1-e/2,this.g_bhM=this.g_bhJ(),this.g_bhM.gain.value=e/2,this.g_bhW=this.g_bhJ(),this.g_bhW.gain.value=b,this.g_bhQ=this.g_beB.createDelay(_+t),this.g_bhQ.delayTime.value=_,this.g_bhX=this.g_beB.createOscillator(),this.g_bhX.frequency.value=n,this.g_bhY=this.g_bhJ(),this.g_bhY.gain.value=t,this.g_bhL.connect(this.g_bhQ),this.g_bhL.connect(this.g_bhN),this.g_bhQ.connect(this.g_bhM),this.g_bhQ.connect(this.g_bhW),this.g_bhW.connect(this.g_bhQ),this.g_bhX.connect(this.g_bhY),this.g_bhY.connect(this.g_bhQ.delayTime),this.g_bhX.start(0)}g_OH(){this.g_bhX.stop(0),this.g_bhL.disconnect(),this.g_bhQ.disconnect(),this.g_bhX.disconnect(),this.g_bhY.disconnect(),this.g_bhN.disconnect(),this.g_bhM.disconnect(),this.g_bhW.disconnect(),super.g_OH()}g_bfz(e){this.g_bhM.disconnect(),this.g_bhM.connect(e),this.g_bhN.disconnect(),this.g_bhN.connect(e)}g_bfv(){return this.g_bhL}g_bgA(e,g,_,t){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bhI[4]=g,this.g_bhK(this.g_bhM.gain,g/2,_,t),this.g_bhK(this.g_bhN.gain,1-g/2,_,t)):6===e?(this.g_bhI[1]=g/1e3,this.g_bhK(this.g_bhY.gain,g/1e3,_,t)):7===e?(this.g_bhI[2]=g,this.g_bhK(this.g_bhX.frequency,g,_,t)):8===e?(this.g_bhI[3]=g/100,this.g_bhK(this.g_bhW.gain,g/100,_,t)):void 0}},self.g_bgs=class extends e{constructor(_,t,n,b,a,e,i){super(_),this.g_T$="phaser",this.g_bhI=[t,n,b,a,e,i],this.g_bhL=this.g_bhJ(),this.g_bhN=this.g_bhJ(),this.g_bhN.gain.value=1-i/2,this.g_bhM=this.g_bhJ(),this.g_bhM.gain.value=i/2,this.g_bhO=this.g_beB.createBiquadFilter(),this.g_bhO.type="allpass",this.g_bhO.frequency.value=t,this.g_bhO.detune.value=n,this.g_bhO.Q.value=b,this.g_bhX=this.g_beB.createOscillator(),this.g_bhX.frequency.value=e,this.g_bhY=this.g_bhJ(),this.g_bhY.gain.value=a,this.g_bhL.connect(this.g_bhO),this.g_bhL.connect(this.g_bhN),this.g_bhO.connect(this.g_bhM),this.g_bhX.connect(this.g_bhY),this.g_bhY.connect(this.g_bhO.frequency),this.g_bhX.start(0)}g_OH(){this.g_bhX.stop(0),this.g_bhL.disconnect(),this.g_bhO.disconnect(),this.g_bhX.disconnect(),this.g_bhY.disconnect(),this.g_bhN.disconnect(),this.g_bhM.disconnect(),super.g_OH()}g_bfz(e){this.g_bhM.disconnect(),this.g_bhM.connect(e),this.g_bhN.disconnect(),this.g_bhN.connect(e)}g_bfv(){return this.g_bhL}g_bgA(e,g,_,t){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bhI[5]=g,this.g_bhK(this.g_bhM.gain,g/2,_,t),this.g_bhK(this.g_bhN.gain,1-g/2,_,t)):1===e?(this.g_bhI[0]=g,this.g_bhK(this.g_bhO.frequency,g,_,t)):2===e?(this.g_bhI[1]=g,this.g_bhK(this.g_bhO.detune,g,_,t)):3===e?(this.g_bhI[2]=g,this.g_bhK(this.g_bhO.Q,g,_,t)):6===e?(this.g_bhI[3]=g,this.g_bhK(this.g_bhY.gain,g,_,t)):7===e?(this.g_bhI[4]=g,this.g_bhK(this.g_bhX.frequency,g,_,t)):void 0}},self.g_bgt=class extends e{constructor(e,g){super(e),this.g_T$="gain",this.g_bhI=[g],this.g_bhZ=this.g_bhJ(),this.g_bhZ.gain.value=g}g_OH(){this.g_bhZ.disconnect(),super.g_OH()}g_bfz(e){this.g_bhZ.disconnect(),this.g_bhZ.connect(e)}g_bfv(){return this.g_bhZ}g_bgA(g,t,n,b){4===g?(this.g_bhI[0]=_(t),this.g_bhK(this.g_bhZ.gain,_(t),n,b)):void 0}},self.g_bgu=class extends e{constructor(e,g,_){super(e),this.g_T$="tremolo",this.g_bhI=[g,_],this.g_bhZ=this.g_bhJ(),this.g_bhZ.gain.value=1-_/2,this.g_bhX=this.g_beB.createOscillator(),this.g_bhX.frequency.value=g,this.g_bhY=this.g_bhJ(),this.g_bhY.gain.value=_/2,this.g_bhX.connect(this.g_bhY),this.g_bhY.connect(this.g_bhZ.gain),this.g_bhX.start(0)}g_OH(){this.g_bhX.stop(0),this.g_bhX.disconnect(),this.g_bhY.disconnect(),this.g_bhZ.disconnect(),super.g_OH()}g_bfz(e){this.g_bhZ.disconnect(),this.g_bhZ.connect(e)}g_bfv(){return this.g_bhZ}g_bgA(e,g,_,t){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bhI[1]=g,this.g_bhK(this.g_bhZ.gain.value,1-g/2,_,t),this.g_bhK(this.g_bhY.gain.value,g/2,_,t)):7===e?(this.g_bhI[0]=g,this.g_bhK(this.g_bhX.frequency,g,_,t)):void 0}},self.g_bgv=class extends e{constructor(e,g,_){super(e),this.g_T$="ringmod",this.g_bhI=[g,_],this.g_bhL=this.g_bhJ(),this.g_bhM=this.g_bhJ(),this.g_bhM.gain.value=_,this.g_bhN=this.g_bhJ(),this.g_bhN.gain.value=1-_,this.g_bh_=this.g_bhJ(),this.g_bh_.gain.value=0,this.g_bhX=this.g_beB.createOscillator(),this.g_bhX.frequency.value=g,this.g_bhX.connect(this.g_bh_.gain),this.g_bhX.start(0),this.g_bhL.connect(this.g_bh_),this.g_bhL.connect(this.g_bhN),this.g_bh_.connect(this.g_bhM)}g_OH(){this.g_bhX.stop(0),this.g_bhX.disconnect(),this.g_bh_.disconnect(),this.g_bhL.disconnect(),this.g_bhM.disconnect(),this.g_bhN.disconnect(),super.g_OH()}g_bfz(e){this.g_bhM.disconnect(),this.g_bhM.connect(e),this.g_bhN.disconnect(),this.g_bhN.connect(e)}g_bfv(){return this.g_bhL}g_bgA(e,g,_,t){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bhI[1]=g,this.g_bhK(this.g_bhM.gain,g,_,t),this.g_bhK(this.g_bhN.gain,1-g,_,t)):7===e?(this.g_bhI[0]=g,this.g_bhK(this.g_bhX.frequency,g,_,t)):void 0}},self.g_bgw=class extends e{constructor(g,_,t,n,b,e){super(g),this.g_T$="distortion",this.g_bhI=[_,t,n,b,e],this.g_bhL=this.g_bhJ(),this.g_bh$=this.g_bhJ(),this.g_bia=this.g_bhJ(),this.g_bib(n,b),this.g_bhM=this.g_bhJ(),this.g_bhM.gain.value=e,this.g_bhN=this.g_bhJ(),this.g_bhN.gain.value=1-e,this.g_bic=this.g_beB.createWaveShaper(),this.g_bid=new Float32Array(65536),this.g_bie(_,t),this.g_bic.curve=this.g_bid,this.g_bhL.connect(this.g_bh$),this.g_bhL.connect(this.g_bhN),this.g_bh$.connect(this.g_bic),this.g_bic.connect(this.g_bia),this.g_bia.connect(this.g_bhM)}g_OH(){this.g_bhL.disconnect(),this.g_bh$.disconnect(),this.g_bic.disconnect(),this.g_bia.disconnect(),this.g_bhM.disconnect(),this.g_bhN.disconnect(),super.g_OH()}g_bib(e,g){.01>e&&(e=.01),this.g_bh$.gain.value=e,this.g_bia.gain.value=Math.pow(1/e,.6)*g}g_bie(e,g){for(let _,t=0;32768>t;++t)_=t/32768,_=this.g_bif(_,e,g),this.g_bid[32768+t]=_,this.g_bid[32768-t-1]=-_}g_bif(e,_,t){const n=1.05*t*_-_,b=0>e?-1:1,a=0>e?-e:e;let g=a<_?a:_+n*i(a-_,1/n);return g*=b,g}g_bfz(e){this.g_bhM.disconnect(),this.g_bhM.connect(e),this.g_bhN.disconnect(),this.g_bhN.connect(e)}g_bfv(){return this.g_bhL}g_bgA(e,g,_,t){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bhI[4]=g,this.g_bhK(this.g_bhM.gain,g,_,t),this.g_bhK(this.g_bhN.gain,1-g,_,t)):void 0}},self.g_bgx=class extends e{constructor(g,_,t,n,b,e){super(g),this.g_T$="compressor",this.g_bhI=[_,t,n,b,e],this.g_bhZ=this.g_beB.createDynamicsCompressor(),this.g_bhZ.threshold.value=_,this.g_bhZ.knee.value=t,this.g_bhZ.ratio.value=n,this.g_bhZ.attack.value=b,this.g_bhZ.release.value=e}g_OH(){this.g_bhZ.disconnect(),super.g_OH()}g_bfz(e){this.g_bhZ.disconnect(),this.g_bhZ.connect(e)}g_bfv(){return this.g_bhZ}g_bgA(){}},self.g_bgy=class extends e{constructor(e,g,_){super(e),this.g_T$="analyser",this.g_bhI=[g,_],this.g_bhZ=this.g_beB.createAnalyser(),this.g_bhZ.fftSize=g,this.g_bhZ.smoothingTimeConstant=_,this.g_big=new Float32Array(this.g_bhZ.frequencyBinCount),this.g_bih=new Uint8Array(g),this.g_bii=0,this.g_bij=0,this.g_bgH.g_bgB(this)}g_OH(){this.g_bgH.g_bgC(this),this.g_bhZ.disconnect(),super.g_OH()}g_aqF(){this.g_bhZ.getFloatFrequencyData(this.g_big),this.g_bhZ.getByteTimeDomainData(this.g_bih);const e=this.g_bhZ.fftSize;this.g_bii=0;let g=0;for(let _,t=0;t<e;++t)_=(this.g_bih[t]-128)/128,0>_&&(_=-_),this.g_bii<_&&(this.g_bii=_),g+=_*_;this.g_bii=n(this.g_bii),this.g_bij=n(Math.sqrt(g/e))}g_bfz(e){this.g_bhZ.disconnect(),this.g_bhZ.connect(e)}g_bfv(){return this.g_bhZ}g_bgA(){}g_bgc(){return{tag:this.g_bfR(),index:this.g_akg(),peak:this.g_bii,rms:this.g_bij,binCount:this.g_bhZ.frequencyBinCount,freqBins:this.g_big}}}}{function g(e){e.stopPropagation()}function _(e){13!==e.which&&27!==e.which&&e.stopPropagation()}const e=class extends g_bcz{constructor(e){super(e,"text-input"),this.g_bcJ("scroll-to-bottom",e=>this.g_bik(e))}g_aHl(t,n){let b;const a=n.type;return"textarea"===a?(b=document.createElement("textarea"),b.style.resize="none"):(b=document.createElement("input"),b.type=a),b.style.position="absolute",b.autocomplete="off",b.addEventListener("touchstart",g),b.addEventListener("touchmove",g),b.addEventListener("touchend",g),b.addEventListener("mousedown",g),b.addEventListener("mouseup",g),b.addEventListener("keydown",_),b.addEventListener("keyup",_),b.addEventListener("click",e=>{e.stopPropagation(),this.g_bcM("click",t)}),b.addEventListener("dblclick",e=>{e.stopPropagation(),this.g_bcM("dblclick",t)}),b.addEventListener("input",()=>this.g_bcL("change",t,{text:b.value})),b.id=n.id,this.g_bcN(b,n),b}g_bcN(e,g){e.value=g.text,e.placeholder=g.placeholder,e.title=g.title,e.disabled=!g.isEnabled,e.readOnly=g.isReadOnly,e.spellcheck=g.spellCheck}g_bik(e){e.scrollTop=e.scrollHeight}};g_bcQ.g_bdL(e)}{const e=class extends g_bch{constructor(e){super(e,"browser"),this.g_aQ_="",this.g_bcs("get-initial-state",e=>this.g_bil(e)),this.g_bcs("ready-for-sw-messages",()=>this.g_bim()),this.g_bcs("alert",e=>this.g_bin(e)),this.g_bcs("close",()=>this.g_bio()),this.g_bcs("set-focus",e=>this.g_bcG(e)),this.g_bcs("vibrate",e=>this.g_bip(e)),this.g_bcs("lock-orientation",e=>this.g_biq(e)),this.g_bcs("unlock-orientation",()=>this.g_bir()),this.g_bcs("navigate",e=>this.g_bis(e)),this.g_bcs("request-fullscreen",e=>this.g_bit(e)),this.g_bcs("exit-fullscreen",()=>this.g_biu()),window.addEventListener("online",()=>this.g_a_Y(!0)),window.addEventListener("offline",()=>this.g_a_Y(!1)),document.addEventListener("backbutton",()=>this.g_biv()),"undefined"!=typeof Windows&&Windows.UI.Core.SystemNavigationManager.getForCurrentView().addEventListener("backrequested",e=>this.g_biw(e))}g_bil(e){return this.g_aQ_=e.exportType,{location:location.toString(),isOnline:!!navigator.onLine,referrer:document.referrer,title:document.title,isCookieEnabled:!!navigator.cookieEnabled,screenWidth:screen.width,screenHeight:screen.height,windowOuterWidth:window.outerWidth,windowOuterHeight:window.outerHeight,isScirraArcade:"undefined"!=typeof window.is_scirra_arcade}}g_bim(){window.C3_RegisterSW&&window.OfflineClientInfo&&window.OfflineClientInfo.SetMessageCallback(e=>this.g_bcl("sw-message",e.data))}g_a_Y(e){this.g_bcl("online-state",{isOnline:e})}g_biv(){this.g_bcl("backbutton")}g_biw(e){e.handled=!0,this.g_bcl("backbutton")}g_bix(){return"nwjs"===this.g_aQ_?nw.Window.get():null}g_bin(e){alert(e.message)}g_bio(){navigator.app&&navigator.app.exitApp?navigator.app.exitApp():navigator.device&&navigator.device.exitApp?navigator.device.exitApp():window.close()}g_bcG(e){const g=e.isFocus;if("nwjs"===this.g_aQ_){const e=this.g_bix();g?e.focus():e.blur()}else g?window.focus():window.blur()}g_bip(e){navigator.vibrate&&navigator.vibrate(e.pattern)}g_biq(e){const g=e.orientation;if(screen.orientation&&screen.orientation.lock)screen.orientation.lock(g).catch(e=>console.warn("[Construct 3] Failed to lock orientation: ",e));else try{let e=!1;screen.lockOrientation?e=screen.lockOrientation(g):screen.webkitLockOrientation?e=screen.webkitLockOrientation(g):screen.mozLockOrientation?e=screen.mozLockOrientation(g):screen.msLockOrientation&&(e=screen.msLockOrientation(g)),e||console.warn("[Construct 3] Failed to lock orientation")}catch(e){console.warn("[Construct 3] Failed to lock orientation: ",e)}}g_bir(){try{screen.orientation&&screen.orientation.unlock?screen.orientation.unlock():screen.unlockOrientation?screen.unlockOrientation():screen.webkitUnlockOrientation?screen.webkitUnlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()}catch(e){}}g_bis(e){const g=e.type;if("back"===g)navigator.app&&navigator.app.backHistory?navigator.app.backHistory():window.back();else if("forward"===g)window.forward();else if("home"===g)window.g_biy();else if("reload"===g)location.reload();else if("url"===g){const g=e.url,_=e.target,t=e.exportType;"windows-uwp"===t&&"undefined"!=typeof Windows?Windows.System.Launcher.launchUriAsync(new Windows.Foundation.Uri(g)):navigator.app&&navigator.app.loadUrl?navigator.app.loadUrl(g,{openExternal:!0}):"cordova"===t?window.open(g,"_system"):"preview"===t?window.open(g,"_blank"):!this.g_a_X&&(2===_?window.top.location=g:1===_?window.parent.location=g:window.location=g)}else if("new-window"===g){const g=e.url,_=e.tag,t=e.exportType;"windows-uwp"===t&&"undefined"!=typeof Windows?Windows.System.Launcher.launchUriAsync(new Windows.Foundation.Uri(g)):navigator.app&&navigator.app.loadUrl?navigator.app.loadUrl(g,{openExternal:!0}):"cordova"===t?window.open(g,"_system"):window.open(g,_)}}g_bit(e){const g={navigationUI:"auto"},_=e.navUI;1===_?g.navigationUI="hide":2===_&&(g.navigationUI="show");const t=document.documentElement;t.requestFullscreen?t.requestFullscreen(g):t.mozRequestFullScreen?t.mozRequestFullScreen(g):t.msRequestFullscreen?t.msRequestFullscreen(g):t.webkitRequestFullScreen&&("undefined"==typeof Element.ALLOW_KEYBOARD_INPUT?t.webkitRequestFullScreen():t.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT))}g_biu(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()}};g_bcQ.g_bdL(e)}